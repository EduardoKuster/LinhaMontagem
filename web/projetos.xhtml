<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
    <h:head>
        <link rel="stylesheet" href="css/geral.css" type="text/css"/>
        <h:outputStylesheet name="geral.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"></link>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <link href="css/geral.css" rel="stylesheet" type="text/css"/>
        <title>Projetos</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="shortcut icon" href="css/favicon.ico" />
    </h:head>
    <h:body  onload="#{beanProjeto.consultar()}">
        <div id="cabecalho">  
            <nav class="navbar navbar-expand-lg navbar-light bg-primary">                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul style="margin-left: 10%" class="navbar-nav mr-auto">
                        <li><img src="css/logopequenabranca.png" alt="" style="margin: -5px; margin-right: 10px; margin-top: 1px;"/> </li>
                        <li class="nav-item active">
                            <a class="nav-link text-white font-weight-bold" href="index.jsf">Inicio <span class="sr-only">(current)</span></a>
                        </li>
                         <ui:fragment rendered="#{sessionScope['user'] !='Login'}">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="meusProjetos.jsf">Meus Projetos</a>
                        </li>                       
                        <li class="nav-item dropdown bg-primary">
                            <a class="nav-link text-white" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Ferramentas
                            </a>
                            <div class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-white" href="ferramentas.jsf">Listar Ferramentas</a>
                                <a class="dropdown-item text-white" href="criaFerramenta.jsf">Nova Ferramenta</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown bg-primary">
                            <a class="nav-link text-white" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Peças
                            </a>
                            <div class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-white" href="pecas.jsf">Listar Peças</a>
                                <a class="dropdown-item text-white" href="criaPeca.jsf">Nova Peça</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown bg-primary">
                            <a class="nav-link text-white" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Etapas
                            </a>
                            <div class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-white" href="etapas.jsf">Listar Etapas</a>
                                <a class="dropdown-item text-white" href="criaEtapa.jsf">Nova Etapa</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown bg-primary">
                            <a class="nav-link text-white" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Projetos
                            </a>
                            <div class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-white" href="projetos.jsf">Listar Projetos</a>
                                <a class="dropdown-item text-white" href="criaProjeto.jsf">Novo Projeto</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown bg-primary">
                            <a class="nav-link text-white" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Usuários
                            </a>
                            <div class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item text-white" href="usuarios.jsf">Listar Usuários</a>
                                <a class="dropdown-item text-white" href="criaSupervisor.jsf">Novo Supervisor</a>                            
                                <a class="dropdown-item text-white" href="criaFuncionario.jsf">Novo Funcionario</a>
                            </div>
                        </li>
                        </ui:fragment>
                    </ul>                       
                    <i class="fa fa-user"/>
                    <a class="text-white usuario"  href="login"> ${sessionScope['user']}</a>     
                    <ui:fragment rendered="#{sessionScope['user'] !='Login'}">
                    <a class="text-white sair" href="logout.jsf">Sair</a>
                    </ui:fragment>                 
                </div>
            </nav>
        </div>
        <ui:fragment rendered="#{sessionScope['user'] !='Login' and sessionScope['tipo'] =='sup'}">
        <h4 id="local">Projetos</h4>
        <div id="container"  class="justify-content-center d-flex">
            <h:form id="form" class="form-check d-flex justify-content-center" >               
                <h:panelGrid class="grid" style="width: 70%;">
                    <h:messages></h:messages>
                    <h:dataTable var="proj" value="#{beanProjeto.lista}">
                        <h:column class="espacamento"></h:column>
                        <h:column class="coluna">
                            <f:facet name="header">Nome</f:facet>
                            <h:outputLabel  class="listaitem" value="#{proj.nome}" />
                        </h:column>
                        <h:column class="coluna-pequena">
                            <f:facet name="header">Encarregado</f:facet>
                            <h:outputLabel class="listaitem"  value="#{proj.nomesupervisor()}" />
                        </h:column> 
                        <h:column class="coluna-menor">
                            <f:facet name="header">Tempo previsto</f:facet>
                            <h:outputLabel  class="listaitem" value="#{proj.tempoprevisto()}" />
                        </h:column >
                        <h:column class="coluna-pequena">
                            <f:facet name="header">Etapa Atual</f:facet>
                            <h:outputLabel  class="listaitem" value="#{proj.etapaAtual()}" />
                        </h:column>
                        <h:column class="coluna-menor">
                            <f:facet name="header">Repetições restantes</f:facet>
                            <h:outputLabel  class="listaitem" value="#{proj.repeticoesRestantes()}" />
                        </h:column>
                        <h:column class="coluna-pequena">
                            <f:facet name="header">Situação</f:facet>
                            <h:outputLabel  class="listaitem" value="#{proj.buscarSituacao()}" />
                        </h:column>
                        <h:column class="coluna botoesgrid">
                            <h:commandLink style="color:lightskyblue;"  class="listaitem btn btn-info text-white border-1 border-dark"  value="editar" action="#{beanProjeto.editarRedirect(proj.idprojeto)}"></h:commandLink>
                        </h:column> 
                        <h:column class="coluna botoesgrid">
                            <h:commandLink style="color:lightskyblue;"   class="listaitem btn btn-danger text-white border-1 border-dark"  value="deletar" action="#{beanProjeto.deletar(proj.idprojeto)}"></h:commandLink>
                        </h:column>
                    </h:dataTable>
                </h:panelGrid>
            </h:form>
            </div>  
        </ui:fragment>
        <ui:fragment rendered="#{sessionScope['user'] =='Login'}"><h1 style="text-align: center;margin-top: 10%;">Acesso negado! Por favor, realize o Login</h1></ui:fragment>        
        <div id="footer">
            <div class="row">
                <div class="col-sm-3">
                </div>
                <div class="col-sm-3">
                    <i class="fa fa-phone"> (47)1234-5678 </i> <i class="fa fa-at"> empresa@yahoo.com</i> <br></br>   <i  class="fa fa-twitter-square"> Twitter: @OficinaDeMontagem </i>
                </div>  
                <br> </br> 
                <br></br> 
                <br> </br> 
                <div class="col-sm-3" style="margin-left: 2%">
                    <i class="	fa fa-map-marker">  bairro, nome da rua, numero 69 </i>  <br></br>   <i  class="fa fa-facebook-square"> Facebook: EmpresaMontagem@gmail.ru </i> <br></br>  <i class="fa fa-registered"> Oficina de Montagem inc.</i>
                </div>
            </div>
        </div>
    </h:body>
</html>
